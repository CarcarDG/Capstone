import{_ as x,r as g,a as L,c as h,b as o,d as s,w as r,e as F,f as t,g as m,u as P,o as R,h as U,E as c}from"./index-BUVx7fbB.js";import{u as A}from"./useAuth-CFDwM75e.js";const I={class:"login-container"},N={class:"login-box"},z={class:"login-footer"},B={class:"signup-link"},C={__name:"Login",setup(D){const _=P(),{login:v,user:w}=A(),i=g(),u=g(!1),n=L({username:"",password:""}),y={username:[{required:!0,message:"Please enter username",trigger:"blur"}],password:[{required:!0,message:"Please enter password",trigger:"blur"}]},d=async()=>{i.value&&await i.value.validate(async f=>{var e;if(f){u.value=!0;try{if(await v(n)){c.success("Login successful");const l=((e=w.value)==null?void 0:e.role)==="ADMIN"?"/admin":"/";_.push(l)}else c.error("Invalid username or password")}catch{c.error("Invalid username or password")}finally{u.value=!1}}})};return(f,e)=>{const a=t("el-input"),l=t("el-form-item"),b=t("el-button"),V=t("el-form"),k=t("router-link");return R(),h("div",I,[o("div",N,[e[8]||(e[8]=o("div",{class:"login-header"},[o("h1",null,"ðŸŽ Recipe Finder"),o("p",null,"Recipe & Food Sharing Platform")],-1)),s(V,{ref_key:"loginFormRef",ref:i,model:n,rules:y,class:"login-form",onSubmit:F(d,["prevent"])},{default:r(()=>[s(l,{prop:"username"},{default:r(()=>[s(a,{modelValue:n.username,"onUpdate:modelValue":e[0]||(e[0]=p=>n.username=p),placeholder:"Username",size:"large","prefix-icon":"User"},null,8,["modelValue"])]),_:1}),s(l,{prop:"password"},{default:r(()=>[s(a,{modelValue:n.password,"onUpdate:modelValue":e[1]||(e[1]=p=>n.password=p),type:"password",placeholder:"Password",size:"large","prefix-icon":"Lock","show-password":"",onKeyup:U(d,["enter"])},null,8,["modelValue"])]),_:1}),s(l,null,{default:r(()=>[s(b,{type:"primary",size:"large",loading:u.value,class:"login-button",onClick:d},{default:r(()=>[...e[2]||(e[2]=[m(" Login ",-1)])]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"]),o("div",z,[e[5]||(e[5]=o("p",null,"Demo Accounts:",-1)),e[6]||(e[6]=o("p",null,"Admin: admin / admin123",-1)),e[7]||(e[7]=o("p",null,"User: john / user123",-1)),o("div",B,[e[4]||(e[4]=m(" Don't have an account? ",-1)),s(k,{to:"/signup"},{default:r(()=>[...e[3]||(e[3]=[m("Sign up here",-1)])]),_:1})])])])])}}},S=x(C,[["__scopeId","data-v-904b9940"]]);export{S as default};
