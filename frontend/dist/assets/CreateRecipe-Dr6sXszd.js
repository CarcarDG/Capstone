import{_ as J,r as R,a as Y,C as K,l as Q,c as _,b as n,d as e,t as U,w as t,f as u,u as G,o as f,g as b,k as y,K as W,v as X,s as h,F as D,p as E,R as P,E as g}from"./index-BUVx7fbB.js";const Z={class:"create-recipe-page"},ee={class:"page-header"},le=["src"],te={class:"section-header"},ae={class:"ingredients-list"},oe={class:"section-header"},se={class:"steps-list"},re={class:"step-number"},ne={class:"form-actions"},ie={__name:"CreateRecipe",setup(ue){const T=Q(),x=G(),C=R(null),w=R(!1),k=R(!1),a=Y({title:"",description:"",category:"",coverImage:"",cookingTime:30,servings:2,difficulty:"EASY",ingredients:[{name:"",amount:""}],steps:[{step:1,description:""}],tips:"",equipment:[]}),A={title:[{required:!0,message:"Please enter recipe title",trigger:"blur"},{min:3,max:100,message:"Title must be 3-100 characters",trigger:"blur"}],description:[{required:!0,message:"Please enter description",trigger:"blur"}],category:[{required:!0,message:"Please select category",trigger:"change"}],cookingTime:[{required:!0,message:"Please enter cooking time",trigger:"blur"}],servings:[{required:!0,message:"Please enter servings",trigger:"blur"}],difficulty:[{required:!0,message:"Please select difficulty",trigger:"change"}]},M=i=>{a.coverImage=URL.createObjectURL(i.raw)},B=()=>{a.ingredients.push({name:"",amount:""})},F=i=>{a.ingredients.length>1?a.ingredients.splice(i,1):g.warning("At least one ingredient is required")},N=()=>{a.steps.push({step:a.steps.length+1,description:""})},$=i=>{a.steps.length>1?(a.steps.splice(i,1),a.steps.forEach((l,d)=>{l.step=d+1})):g.warning("At least one step is required")},O=async()=>{g.success("Recipe saved as draft"),localStorage.setItem("recipeDraft",JSON.stringify(a))},L=async()=>{C.value&&await C.value.validate(async i=>{if(i){if(a.ingredients.filter(r=>r.name&&r.amount).length===0){g.error("Please add at least one ingredient");return}if(a.steps.filter(r=>r.description).length===0){g.error("Please add at least one cooking step");return}w.value=!0;try{await new Promise(r=>setTimeout(r,1500)),g.success(k.value?"Recipe updated successfully!":"Recipe published successfully!"),localStorage.removeItem("recipeDraft"),x.push("/recipes")}catch{g.error("Failed to save recipe")}finally{w.value=!1}}})};return K(()=>{T.params.id&&(k.value=!0);const i=localStorage.getItem("recipeDraft");i&&!k.value&&Object.assign(a,JSON.parse(i))}),(i,l)=>{const d=u("el-icon"),r=u("el-button"),v=u("el-input"),p=u("el-form-item"),s=u("el-option"),S=u("el-select"),j=u("el-upload"),V=u("el-card"),q=u("el-input-number"),I=u("el-col"),z=u("el-row"),H=u("el-form");return f(),_("div",Z,[n("div",ee,[n("h1",null,U(k.value?"Edit Recipe":"Create New Recipe"),1),e(r,{onClick:l[0]||(l[0]=o=>i.$router.back())},{default:t(()=>[e(d,null,{default:t(()=>[e(y(W))]),_:1}),l[10]||(l[10]=b(" Back ",-1))]),_:1})]),e(H,{model:a,rules:A,ref_key:"recipeFormRef",ref:C,"label-width":"120px"},{default:t(()=>[e(V,{class:"form-section"},{header:t(()=>[...l[11]||(l[11]=[n("h2",null,"Basic Information",-1)])]),default:t(()=>[e(p,{label:"Recipe Title",prop:"title"},{default:t(()=>[e(v,{modelValue:a.title,"onUpdate:modelValue":l[1]||(l[1]=o=>a.title=o),placeholder:"Enter recipe title"},null,8,["modelValue"])]),_:1}),e(p,{label:"Description",prop:"description"},{default:t(()=>[e(v,{modelValue:a.description,"onUpdate:modelValue":l[2]||(l[2]=o=>a.description=o),type:"textarea",rows:3,placeholder:"Brief description of your recipe"},null,8,["modelValue"])]),_:1}),e(p,{label:"Category",prop:"category"},{default:t(()=>[e(S,{modelValue:a.category,"onUpdate:modelValue":l[3]||(l[3]=o=>a.category=o),placeholder:"Select category"},{default:t(()=>[e(s,{label:"Main Dishes",value:"main"}),e(s,{label:"Quick Meals",value:"quick"}),e(s,{label:"Soups",value:"soups"}),e(s,{label:"Baking",value:"baking"}),e(s,{label:"Desserts",value:"desserts"}),e(s,{label:"Vegetarian",value:"vegetarian"}),e(s,{label:"Meat Dishes",value:"meat"})]),_:1},8,["modelValue"])]),_:1}),e(p,{label:"Cover Image",prop:"coverImage"},{default:t(()=>[e(j,{class:"cover-uploader","show-file-list":!1,"on-change":M,"auto-upload":!1,accept:"image/*"},{default:t(()=>[a.coverImage?(f(),_("img",{key:0,src:a.coverImage,class:"cover-preview"},null,8,le)):(f(),X(d,{key:1,class:"cover-uploader-icon"},{default:t(()=>[e(y(h))]),_:1}))]),_:1}),l[12]||(l[12]=n("p",{class:"upload-tip"},"Click to upload cover image (recommended: 800x600px)",-1))]),_:1})]),_:1}),e(V,{class:"form-section"},{header:t(()=>[...l[13]||(l[13]=[n("h2",null,"Recipe Details",-1)])]),default:t(()=>[e(z,{gutter:20},{default:t(()=>[e(I,{span:8},{default:t(()=>[e(p,{label:"Cooking Time",prop:"cookingTime"},{default:t(()=>[e(q,{modelValue:a.cookingTime,"onUpdate:modelValue":l[4]||(l[4]=o=>a.cookingTime=o),min:1,max:999},null,8,["modelValue"]),l[14]||(l[14]=n("span",{class:"unit"},"minutes",-1))]),_:1})]),_:1}),e(I,{span:8},{default:t(()=>[e(p,{label:"Servings",prop:"servings"},{default:t(()=>[e(q,{modelValue:a.servings,"onUpdate:modelValue":l[5]||(l[5]=o=>a.servings=o),min:1,max:50},null,8,["modelValue"]),l[15]||(l[15]=n("span",{class:"unit"},"people",-1))]),_:1})]),_:1}),e(I,{span:8},{default:t(()=>[e(p,{label:"Difficulty",prop:"difficulty"},{default:t(()=>[e(S,{modelValue:a.difficulty,"onUpdate:modelValue":l[6]||(l[6]=o=>a.difficulty=o)},{default:t(()=>[e(s,{label:"Easy",value:"EASY"}),e(s,{label:"Medium",value:"MEDIUM"}),e(s,{label:"Hard",value:"HARD"})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),e(V,{class:"form-section"},{header:t(()=>[n("div",te,[l[17]||(l[17]=n("h2",null,"Ingredients",-1)),e(r,{type:"primary",size:"small",onClick:B},{default:t(()=>[e(d,null,{default:t(()=>[e(y(h))]),_:1}),l[16]||(l[16]=b(" Add Ingredient ",-1))]),_:1})])]),default:t(()=>[n("div",ae,[(f(!0),_(D,null,E(a.ingredients,(o,c)=>(f(),_("div",{key:c,class:"ingredient-item"},[e(v,{modelValue:o.name,"onUpdate:modelValue":m=>o.name=m,placeholder:"Ingredient name",style:{width:"60%"}},null,8,["modelValue","onUpdate:modelValue"]),e(v,{modelValue:o.amount,"onUpdate:modelValue":m=>o.amount=m,placeholder:"Amount",style:{width:"30%"}},null,8,["modelValue","onUpdate:modelValue"]),e(r,{type:"danger",circle:"",onClick:m=>F(c)},{default:t(()=>[e(d,null,{default:t(()=>[e(y(P))]),_:1})]),_:1},8,["onClick"])]))),128))])]),_:1}),e(V,{class:"form-section"},{header:t(()=>[n("div",oe,[l[19]||(l[19]=n("h2",null,"Cooking Steps",-1)),e(r,{type:"primary",size:"small",onClick:N},{default:t(()=>[e(d,null,{default:t(()=>[e(y(h))]),_:1}),l[18]||(l[18]=b(" Add Step ",-1))]),_:1})])]),default:t(()=>[n("div",se,[(f(!0),_(D,null,E(a.steps,(o,c)=>(f(),_("div",{key:c,class:"step-item"},[n("div",re,U(c+1),1),e(v,{modelValue:o.description,"onUpdate:modelValue":m=>o.description=m,type:"textarea",rows:2,placeholder:`Step ${c+1} description`},null,8,["modelValue","onUpdate:modelValue","placeholder"]),e(r,{type:"danger",circle:"",onClick:m=>$(c)},{default:t(()=>[e(d,null,{default:t(()=>[e(y(P))]),_:1})]),_:1},8,["onClick"])]))),128))])]),_:1}),e(V,{class:"form-section"},{header:t(()=>[...l[20]||(l[20]=[n("h2",null,"Additional Information",-1)])]),default:t(()=>[e(p,{label:"Cooking Tips"},{default:t(()=>[e(v,{modelValue:a.tips,"onUpdate:modelValue":l[7]||(l[7]=o=>a.tips=o),type:"textarea",rows:3,placeholder:"Share your cooking tips and tricks..."},null,8,["modelValue"])]),_:1}),e(p,{label:"Equipment Needed"},{default:t(()=>[e(S,{modelValue:a.equipment,"onUpdate:modelValue":l[8]||(l[8]=o=>a.equipment=o),multiple:"",filterable:"","allow-create":"",placeholder:"Select or add equipment",style:{width:"100%"}},{default:t(()=>[e(s,{label:"Oven",value:"oven"}),e(s,{label:"Stove",value:"stove"}),e(s,{label:"Microwave",value:"microwave"}),e(s,{label:"Blender",value:"blender"}),e(s,{label:"Mixer",value:"mixer"}),e(s,{label:"Pressure Cooker",value:"pressure-cooker"}),e(s,{label:"Air Fryer",value:"air-fryer"}),e(s,{label:"Slow Cooker",value:"slow-cooker"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),n("div",ne,[e(r,{onClick:l[9]||(l[9]=o=>i.$router.back())},{default:t(()=>[...l[21]||(l[21]=[b("Cancel",-1)])]),_:1}),e(r,{type:"info",onClick:O},{default:t(()=>[...l[22]||(l[22]=[b("Save as Draft",-1)])]),_:1}),e(r,{type:"primary",onClick:L,loading:w.value},{default:t(()=>[b(U(k.value?"Update Recipe":"Publish Recipe"),1)]),_:1},8,["loading"])])]),_:1},8,["model"])])}}},pe=J(ie,[["__scopeId","data-v-376ca53e"]]);export{pe as default};
